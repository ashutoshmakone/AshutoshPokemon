<!DOCTYPE html>

<html>
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>The Pokemon Web UI</title>
</head>
<body >
    <ul>
  <li><a class="active" href="index.html">Top 150</a></li>
  <li><a href="compare.html">Compare</a></li>
  <li><a href="favourites.html">About</a></li>
</ul>
        <center><h1 style="color: #FF6E01;">Statistics and Top 150 Pokemons and Your Favourites !!!</h1></center>


    

<div class="row" style="margin-left: 40px;">
  <div class="column" style="background-color:#ADCECC; padding: 10px;">
 <div style="width: 100%;">
        <h3 style="float:right;">Top 150 Pokemons</h3>
        <select id="sel" size="15" style="float:right;" onchange="show(this);">
        <option value="">-- Select a Pokemon to display --</option>
        </select>
   </div>     
  </div>
  <div class="column" style="background-color:#53D1C8; padding: 10px;">
        <h3 style="align-content: center;">Details of Pokemon</h3>
        <div style="height: 210px;">
    <img id="POKO" src="" style="border:2px; border-style: solid;">
    <p id="msg"></p>
    </div><br>
    <button onclick="POKEfavourite()" style="width:100% ; height: 40px; background-color: #905805;">Add this Pokemon to Favourite</button>

  </div>
  <div class="column" style="background-color:#ADCECC;">
        <h3 style="align-content: center;">Your Favourites!</h3>

        <select id="selF" size="10" style="float:left;" onchange="show(this);">
        <option value="">-- Select a Pokemon to display favourite--</option>
        </select>

  </div>
</div>
<br>
<div style="align-items: center;">
 <img src="POKEgroup.jpeg" alt="Pokemon Group" style="width:322px;height:542px;  margin-right: 100px; float:right; background-attachment: fixed;">
</div>



   <script>
    var favPokes = [];
//    favPokes=localStorage.getItem("someVarKey");
        var ele = document.getElementById('sel');
 
        async function getISS(){
            for(var i=1;i<151;i++)
            {
            response = await fetch('https://pokeapi.co/api/v2/pokemon/'+i);
            data = await response.json();
//            console.log(data.name);
            ele.innerHTML = ele.innerHTML +  "<option value=" + data.id + ">" +data.id+" : "+ data.name + "</option>";
            }
        }
        
async function POKEfavourite() {
     
         //       var f = document.getElementById('sel');
                var Fele = document.getElementById('selF');
                var fID = ele.options[ele.selectedIndex].value;
                if(favPokes.includes(fID))
                {
                 alert("This Pokemon is already in your favourite list");
                } else{
                var fav = document.getElementById('fav');
                favPokes.push(fID);
  //              localStorage.setItem("someVarKey", favPokes);
//                fav.innerHTML = "Buttton Clicked"+favPokes;
//hello
            responseF = await fetch('https://pokeapi.co/api/v2/pokemon/'+fID);
            dataF = await responseF.json();
//            console.log(data.name);
            Fele.innerHTML = Fele.innerHTML +  "<option value=" + dataF.id + ">" +dataF.id+" : "+ dataF.name + "</option>";
                 
                }


        }

        
async function show(ele) {
        // GET THE SELECTED VALUE FROM <select> ELEMENT AND SHOW IT.
            response1 = await fetch('https://pokeapi.co/api/v2/pokemon/'+ele.value);
            data1 = await response1.json();
            var POKtype="";
            for (var j = 0; j < data1.types.length; j++) {
            POKtype=POKtype + data1.types[j].type.name;
            if(j != data1.types.length-1)
            POKtype=POKtype + ", ";
            }

            var POKabi="";
            for (var k = 0; k < data1.abilities.length; k++) {
            POKabi=POKabi + data1.abilities[k].ability.name;
            if(k != data1.abilities.length-1)
            POKabi=POKabi + ", ";
            }
            
            document.getElementById("POKO").src = data1.sprites.front_default;


        var msg = document.getElementById('msg');
        msg.innerHTML = 'Selected Pokemon: <b>' + data1.name + '</b> </br>' +
            'ID: <b>' + data1.id + '</b></br>'+'Type: <b>'+ POKtype+ '</b></br>'+'Abilities: <b>'+ POKabi+ '</b>';
    }        



        
    getISS();
        
    </script>
     
</body>
</html>
